#!/bin/sh

set -euo pipefail
export BCG_E=`basename ${0}`


#======================================================================================================================
# Get vsftpd Version.
#======================================================================================================================

cd /tmp

VERSION=$(cat VERSION)
bcg-debug "vsftpd version ${VERSION}."


#======================================================================================================================
# Install vsftpd and dependencies.
#======================================================================================================================

bcg-echo "Installing vsftpd v${VERSION}..."
apk add --no-cache \
    openssl \
    vsftpd=${VSFTPD_VERSION}
bcg-done


#======================================================================================================================
# Cleanup.
#======================================================================================================================

bcg-debug "Cleaning up default SSL files."
rm -rf /etc/ssl/private


#======================================================================================================================
# Link /etc/ssl/private to /ssl.
#======================================================================================================================

RUN ln -s /ssl /etc/ssl/private
