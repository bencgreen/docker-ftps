#!/usr/bin/with-contenv sh

set -euo pipefail
export BCG_E=`basename ${0}`


#======================================================================================================================
# Attempt to connect to the local FTP server.
#======================================================================================================================

IP="127.0.0.1"
bcg-debug "Connecting to FTP server ${IP}."

FILE=$(mktemp || bcg-error "Unable to create temporary file.")
CHECK=$(lftp -c "open -u ${FTPS_USER},${FTPS_PASS} ${IP} && put -e -E ${FILE} && echo 1")

[[ "${CHECK}" = "1" ]] && exit 0
exit 1
